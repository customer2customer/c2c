<section class="auth-card">
  <h1>Login</h1>
  <p>Use magic link, email/password, or Google to sign in securely.</p>

  <form [formGroup]="form" (ngSubmit)="sendLink()" novalidate>
    <label for="email">Email</label>
    <input id="email" type="email" formControlName="email" placeholder="you@example.com" />
    <p class="error" *ngIf="form.controls['email'].invalid && form.controls['email'].touched">Enter a valid email.</p>

    <button type="submit" [disabled]="status === 'sending'">Send Magic Link</button>
  </form>

  <div class="divider">or</div>

  <form [formGroup]="form" (ngSubmit)="loginWithPassword()" novalidate>
    <label for="password">Password</label>
    <input id="password" type="password" formControlName="password" placeholder="••••••••" />
    <p class="error" *ngIf="passwordStatus === 'error' && errorMessage">{{ errorMessage }}</p>

    <button type="submit" [disabled]="passwordStatus === 'working'">Login with password</button>
    <p class="success" *ngIf="passwordStatus === 'success'">Logged in successfully.</p>
  </form>

  <button class="google" type="button" (click)="loginWithGoogle()" [disabled]="status === 'sending'">
    <span class="google-icon" aria-hidden="true">
      <svg viewBox="0 0 24 24" role="presentation">
        <path
          d="M21.35 11.1h-9.17v2.96h5.62c-.24 1.5-1.69 4.4-5.62 4.4-3.38 0-6.14-2.8-6.14-6.26s2.76-6.26 6.14-6.26c1.93 0 3.23.82 3.97 1.53l2.7-2.6C17.25 3.1 15 2 12.18 2 6.95 2 2.7 6.2 2.7 12s4.25 10 9.48 10c5.48 0 9.1-3.86 9.1-9.3 0-.62-.08-1.03-.18-1.6Z"
        />
      </svg>
    </span>
    Continue with Google
  </button>

  <div class="switcher">
    <span>Need an account?</span>
    <a routerLink="/auth/signup">Sign up</a>
  </div>

  <p *ngIf="status === 'sent'" class="success">{{ confirmationMessage || 'Check your email for the login link.' }}</p>
  <p *ngIf="status === 'error'" class="error">{{ errorMessage }}</p>
</section>
