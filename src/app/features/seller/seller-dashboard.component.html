<section class="seller">
  <header>
    <div>
      <p class="eyebrow">Seller workspace</p>
      <h1>Manage your listings</h1>
    </div>
    <div class="quick-actions">
      <a routerLink="/seller/create" class="primary">Create New Product</a>
      <a routerLink="/products" class="secondary">View public catalog</a>
    </div>
  </header>

  <section class="stats" *ngIf="stats$ | async as stats">
    <div>
      <p class="label">Total Products</p>
      <p class="value">{{ stats.totalProducts }}</p>
    </div>
    <div>
      <p class="label">Estimated Sales</p>
      <p class="value">₹{{ stats.totalSales | number: '1.0-0' }}</p>
    </div>
    <div>
      <p class="label">Average Rating</p>
      <p class="value">{{ stats.averageRating | number: '1.1-1' }}★</p>
    </div>
  </section>

  <section class="table" *ngIf="products$ | async as products">
    <div class="table-row table-head">
      <span>Name</span>
      <span>Category</span>
      <span>Price</span>
      <span>Stock</span>
      <span>Status</span>
      <span>Actions</span>
    </div>
    <div class="table-row" *ngFor="let product of products; trackBy: trackByProductId">
      <span>{{ product.productName }}</span>
      <span>{{ product.category }}</span>
      <span>₹{{ product.c2cPrice | number: '1.0-0' }}</span>
      <span>{{ product.stock }}</span>
      <span>{{ product.verificationStatus }} / {{ product.availabilityStatus }}</span>
      <span class="actions">
        <a class="secondary" [routerLink]="['/seller/edit', product.id]">Edit</a>
        <button class="primary" type="button" (click)="deleteProduct(product.id)">Delete</button>
      </span>
    </div>
  </section>

  <section class="admin-tools" *ngIf="isAdmin$ | async">
    <div class="table-row table-head">
      <span>Admin tools</span>
      <span class="actions">
        <button type="button" class="primary" (click)="loadSampleProducts()">Load sample data</button>
        <button type="button" class="secondary" (click)="clearProducts()">Clear products</button>
      </span>
    </div>
    <p class="hint" *ngIf="adminActionStatus$ | async as status">
      <ng-container [ngSwitch]="status">
        <span *ngSwitchCase="'working'">Processing request...</span>
        <span *ngSwitchCase="'done'">Done updating the product catalog.</span>
        <span *ngSwitchCase="'error'">Could not complete the admin action.</span>
      </ng-container>
    </p>
  </section>
</section>
